import random

# ===== Classe base =====
class Personagem:
    def __init__(self, nome, forca, inteligencia, velocidade, vitalidade):
        self.nome = nome
        self.forca = forca
        self.inteligencia = inteligencia
        self.velocidade = velocidade
        self.vitalidade = vitalidade
        self.vivo = True

    def atacar(self, alvo):
        """MÃ©todo genÃ©rico â€” sobrescrito nas subclasses"""
        pass

    def defender(self, dano):
        """Reduz vitalidade de acordo com dano"""
        defesa = self.calcular_defesa()
        dano_real = max(0, dano - defesa)
        self.vitalidade -= dano_real
        print(f"{self.nome} defendeu {defesa} e recebeu {dano_real} de dano! (HP: {self.vitalidade})")

        if self.vitalidade <= 0:
            self.vivo = False
            print(f"ðŸ’€ {self.nome} foi derrotado!")

    def calcular_defesa(self):
        """MÃ©todo genÃ©rico de defesa â€” pode ser sobrescrito"""
        return int((self.velocidade + self.inteligencia) / 4)


# ====== Classes de HerÃ³is ======
class Guerreiro(Personagem):
    def atacar(self, alvo):
        dano = self.forca * 2 + random.randint(0, 5)
        print(f"ðŸ—¡ï¸ {self.nome} ataca {alvo.nome} causando {dano} de dano!")
        alvo.defender(dano)

class Mago(Personagem):
    def atacar(self, alvo):
        dano = self.inteligencia * 2 + random.randint(0, 8)
        print(f"âœ¨ {self.nome} lanÃ§a magia em {alvo.nome} causando {dano} de dano!")
        alvo.defender(dano)

class Arqueiro(Personagem):
    def atacar(self, alvo):
        dano = int((self.velocidade + self.forca) * 1.5) + random.randint(0, 4)
        print(f"ðŸ¹ {self.nome} dispara flecha em {alvo.nome} causando {dano} de dano!")
        alvo.defender(dano)


# ====== Classes de Inimigos ======
class Inimigo(Personagem):
    pass

class Orc(Personagem):
    def atacar(self, alvo):
        dano = self.forca * 2 + random.randint(3, 7)
        print(f"ðŸ‘¹ {self.nome} golpeia {alvo.nome} com forÃ§a brutal! Dano: {dano}")
        alvo.defender(dano)

class Goblin(Personagem):
    def atacar(self, alvo):
        dano = self.velocidade * 2 + random.randint(0, 3)
        print(f"ðŸ‘º {self.nome} ataca rapidamente {alvo.nome}! Dano: {dano}")
        alvo.defender(dano)

class Necromante(Personagem):
    def atacar(self, alvo):
        dano = self.inteligencia * 2 + random.randint(0, 10)
        print(f"ðŸ’€ {self.nome} conjura feitiÃ§o sombrio contra {alvo.nome}! Dano: {dano}")
        alvo.defender(dano)


# ====== FunÃ§Ã£o de batalha ======
def batalha(herois, inimigos):
    print("\nâš”ï¸ INÃCIO DA BATALHA âš”ï¸\n")

    while any(h.vivo for h in herois) and any(i.vivo for i in inimigos):
        heroi = random.choice([h for h in herois if h.vivo])
        inimigo = random.choice([i for i in inimigos if i.vivo])

        # Escolher aleatoriamente quem ataca
        atacante, defensor = random.choice([(heroi, inimigo), (inimigo, heroi)])

        print(f"\nðŸŽ¯ {atacante.nome} vai atacar {defensor.nome}!")
        atacante.atacar(defensor)

    print("\nðŸ FIM DA BATALHA ðŸ")
    if any(h.vivo for h in herois):
        print("âœ¨ Os herÃ³is venceram!")
    else:
        print("â˜ ï¸ Os inimigos venceram!")


# ====== Criando personagens ======
herois = [
    Guerreiro("Guerreiro", forca=8, inteligencia=4, velocidade=5, vitalidade=40),
    Mago("Mago", forca=3, inteligencia=9, velocidade=4, vitalidade=30),
    Arqueiro("Arqueiro", forca=5, inteligencia=5, velocidade=8, vitalidade=35)
]

inimigos = [
    Orc("Orc", forca=9, inteligencia=3, velocidade=4, vitalidade=40),
    Goblin("Goblin", forca=4, inteligencia=4, velocidade=9, vitalidade=25),
    Necromante("Necromante", forca=2, inteligencia=10, velocidade=3, vitalidade=30)
]

# ====== Executar a batalha ======
batalha(herois, inimigos)










# heranÃ§a e polimorfismo
